<div class="mt-2">
    <div class="row my-2 px-3">
      <div class="col-12 text-start editToolbar">
        <dx-toolbar>
          <dxi-item location="before" widget="dxButton" locateInMenu="never">
            <div *dxTemplate>
              <div class="toolbar-label"><b>Websites</b></div>
            </div>
          </dxi-item>
          <dxi-item location="after" locateInMenu="never">
            <div *dxTemplate>
              <dx-button [icon]="'edit'" [stylingMode]="'text'" (onClick)="showWebsitesEditorModal()"></dx-button>
            </div>
          </dxi-item>
        </dx-toolbar>
      </div>
    </div>
    <div class="row my-2 px-3 text-center" *ngIf="websites?.length == 0">
      <div class="col-12" style="text-align: center">
        <span>No Websites Currently Exist</span>
      </div>
    </div>
    <ng-container *ngFor="let website of websites">
      <div class="row mb-2 px-3 py-1">
        <div class="col-6 text-start">
          {{ website.url }}
        </div>
        <div class="col-3 text-center">
          {{ website.website_type }}
        </div>
      </div>
    </ng-container>
</div>

<ag-shr-modal-window
  #websitesEditorModalRef
  [title]="'Add / Edit Websites'"
  [inProgress]="inProgress$ | async"
  [showSaveButton]="false"
  (onPopupClose)="dataGridRef.instance.cancelEditData()"
>
  <dx-data-grid
    #dataGridRef
    [dataSource]="websites"
    [showRowLines]="true"
    [showBorders]="true"
    [showColumnLines]="true"
    [columnAutoWidth]="true"
    [wordWrapEnabled]="true"
    [rowAlternationEnabled]="false"
    (onRowInserting)="onRowInserting($event)"
    (onRowUpdating)="onRowUpdating($event)"
    (onRowRemoving)="onRowRemoving($event)"
  >
    <dxo-toolbar>
      <dxi-item location="before">
        <div>
          <div class="toolbar-label">
            <b>Websites</b>
          </div>
        </div>
      </dxi-item>

      <dxi-item name="addRowButton"></dxi-item>
    </dxo-toolbar>

    <dxo-editing mode="row" [useIcons]="true" [allowUpdating]="true" [allowDeleting]="true" [allowAdding]="true">
    </dxo-editing>
    <dxo-paging [enabled]="false"></dxo-paging>
    <dxo-scrolling [mode]="'virtual'" [showScrollbar]="'always'"></dxo-scrolling>

    <dxi-column [dataField]="WebsiteKeys.url" [width]="'50%'">
      <dxi-validation-rule type="required" [message]="'URL Address is Required'"></dxi-validation-rule>
      <dxi-validation-rule type="custom"
                           [validationCallback]="validateUrlWithOrWithoutProtocol"
                           message="A Valid Website URL is Required">
      </dxi-validation-rule>
    </dxi-column>
    <dxi-column [dataField]="WebsiteKeys.websiteType" caption="Type">
      <dxo-lookup [dataSource]="agentEditorService.business_personal_types"></dxo-lookup>
      <dxi-validation-rule type="required"></dxi-validation-rule>
    </dxi-column>

    <dxi-column type="buttons">
      <dxi-button name="edit"></dxi-button>
      <dxi-button name="delete"></dxi-button>
    </dxi-column>
  </dx-data-grid>
</ag-shr-modal-window>
